inpatient[c("inpatient_beds_used_covid",
"previous_day_admission_adult_covid_confirmed",
"staffed_icu_adult_patients_confirmed_and_suspected_covid")]
covid19[covid19$date == as.Date(date),"Admit"] =
sum((inpatient %>% select(contains("previous_day")))[1:4])
covid19 = covid19 %>% unique()
write.csv(covid19, "covid19.csv",row.names = FALSE)
library(dplyr)
library(lubridate)
library(ggplot2)
library(zoo)
library(gsheet)
library(plyr)
library(pdftools)
library(tidyverse)
library(stringr)
library(anytime)
#  require(readxl)
colMax <- function(data) sapply(data, max, na.rm = TRUE)
library(dplyr)
library(lubridate)
library(ggplot2)
library(zoo)
library(gsheet)
library(plyr)
library(pdftools)
library(tidyverse)
library(stringr)
library(anytime)
#  require(readxl)
colMax <- function(data) sapply(data, max, na.rm = TRUE)
date = Sys.Date()
URL = "https://healthdata.gov/resource/6xf2-c3ie.csv"
inpatient = read.csv(URL, na.strings = c("-999999","-999999.0"))
inpatient = inpatient %>% filter(state == "IA") %>%
select(contains("covid")) %>% select(-contains("coverage"))
temp = cbind(Date =date, inpatient)
# HospitalFed = as.data.frame(temp)
# HospitalFed = rbind(HospitalFed, temp)
if(sum(grepl(date, covid19$date)) == 0){
inpatientSave[nrow(inpatientSave)+1,] = temp
inpatientSave = inpatientSave %>% unique()
covid19[nrow(covid19)+1, "date"] = as.character(date)}
write.csv(inpatientSave, "HospitalData.csv",row.names = FALSE)
covid19[covid19$date == as.Date(date),c("hospitalized",
"new.hospital","ICU")] =
inpatient[c("inpatient_beds_used_covid",
"previous_day_admission_adult_covid_confirmed",
"staffed_icu_adult_patients_confirmed_and_suspected_covid")]
covid19[covid19$date == as.Date(date),"Admit"] =
sum((inpatient %>% select(contains("previous_day")))[1:4])
covid19 = covid19 %>% unique()
write.csv(covid19, "covid19.csv",row.names = FALSE)
tail(inpatientSave;,1:4)
tail(inpatientSave[,1:4])
view(inpatient)
view(inpatientSave)
date = Sys.Date()
URL = "https://healthdata.gov/resource/6xf2-c3ie.csv"
inpatient = read.csv(URL, na.strings = c("-999999","-999999.0"))
inpatient = inpatient %>% filter(state == "IA") %>%
select(contains("covid")) %>% select(-contains("coverage"))
temp = cbind(Date =date, inpatient)
inpatientSave = read.csv("HospitalData.csv")
view(inpatientSave)
# HospitalFed = as.data.frame(temp)
# HospitalFed = rbind(HospitalFed, temp)
if(sum(grepl(date, covid19$date)) == 0){
inpatientSave[nrow(inpatientSave)+1,] = temp
inpatientSave = inpatientSave %>% unique()
covid19[nrow(covid19)+1, "date"] = as.character(date)}
inpatientSave[nrow(inpatientSave)+1,] = temp
str(inpatientSave)
inpatient = inpatient %>% filter(state == "IA") %>%
select(contains("covid")) %>% select(-contains("coverage"))
URL = "https://healthdata.gov/resource/6xf2-c3ie.csv"
inpatient = read.csv(URL, na.strings = c("-999999","-999999.0"))
inpatient = inpatient %>% filter(state == "IA") %>%
select(contains("covid")) %>% select(-contains("coverage"))
temp = cbind(Date =date, inpatient)
# inpatientSave = read.csv("HospitalData.csv")
# HospitalFed = as.data.frame(temp)
# HospitalFed = rbind(HospitalFed, temp)
if(sum(grepl(date, covid19$date)) == 0){
inpatientSave[nrow(inpatientSave)+1,] = temp
inpatientSave = inpatientSave %>% unique()
covid19[nrow(covid19)+1, "date"] = as.character(date)}
temp
length(temp)
names(temp)
names(inpatientSave)
names(inpatientSave) == names(temp)
inpatientSave2 = inpatientSave
names(inpatientSave[43:48])
names(temp[42:48])
names(temp[44:48])
temp1 = names(temp[44:48])
inpatientSave[,temp1]<- NA
inpatientSave[nrow(inpatientSave)+1,] = temp
ncol(inpatientSave)
length(temp)
tail(inpatientSave[,1:4])
tail(inpatientSave1[,1:4])
tail(inpatientSave2[,1:4])
tail(inpatientSave[,43:46])
tail(inpatientSave[,1:4])
inpatientSave = inpatientSave[-34,]
inpatientSave$date = "22-06-03"
inpatientSave$date = "2022-06-03"
view(inpatientSave)
inpatientSave$date = c(inpatientSave2$date, "2022-06-03")
inpatientSave$date = inpatientSave2$date
view(inpatientSave)
inpatientSave$date[35] = "2022-06-03"
inpatientSave$date[34] = "2022-06-03"
tail(inpatientSave[,1:3])
date = Sys.Date()
temp1 = temp
URL = "https://healthdata.gov/resource/6xf2-c3ie.csv"
inpatient = read.csv(URL, na.strings = c("-999999","-999999.0"))
inpatient = inpatient %>% filter(state == "IA") %>%
select(contains("covid")) %>% select(-contains("coverage"))
temp = cbind(Date =date, inpatient)
# inpatientSave = read.csv("HospitalData.csv")
# HospitalFed = as.data.frame(temp)
# HospitalFed = rbind(HospitalFed, temp)
if(sum(grepl(date, covid19$date)) == 0){
inpatientSave[nrow(inpatientSave)+1,] = temp
inpatientSave = inpatientSave %>% unique()
covid19[nrow(covid19)+1, "date"] = as.character(date)}
view(inpatientSave)
temp = cbind(Date =as.date(date), inpatient)
inpatientSave[nrow(inpatientSave),] = temp
tail(inpatientSave[,1:3])
Date(19147)
Date(date)
date
inpatientSave$date[nrow(inpatientSave)] = date
tail(inpatientSave[,1:3])
inpatientSave$date[nrow(inpatientSave)] = as.Date(date)
tail(inpatientSave[,1:3])
date
inpatientSave$date[nrow(inpatientSave)] = as.character(date)
tail(inpatientSave[,1:3])
covid19[nrow(covid19)+1, "date"] = as.character(date)}
covid19[nrow(covid19)+1, "date"] = as.character(date)
tail(covid19[,1:4])
tail(covid19[,1:10])
covid19 = covid19[-c(632)]
covid19 <- read.csv("covid19.csv",
stringsAsFactors = FALSE)
## Fix an error that sometimes comes from importing from EXCEL
names(covid19)[1] <- "date"
# names(covid19)[names(covid19) == "Ã¯..date"] <- 'date'
## Format date column correctly
covid19$date = anydate(covid19$date)
covid19[nrow(covid19)+1, "date"] = as.character(date)
covid19[covid19$date == as.Date(date),c("hospitalized",
"new.hospital","ICU")] =
inpatient[c("inpatient_beds_used_covid",
"previous_day_admission_adult_covid_confirmed",
"staffed_icu_adult_patients_confirmed_and_suspected_covid")]
covid19[covid19$date == as.Date(date),"Admit"] =
sum((inpatient %>% select(contains("previous_day")))[1:4])
covid19 = covid19 %>% unique()
tail(covid19[,1:10])
write.csv(covid19, "covid19.csv",row.names = FALSE)
rm(inpatientSave2)
date = Sys.Date()
URL = "https://healthdata.gov/resource/6xf2-c3ie.csv"
inpatient = read.csv(URL, na.strings = c("-999999","-999999.0"))
inpatient = inpatient %>% filter(state == "IA") %>%
select(contains("covid")) %>% select(-contains("coverage"))
temp = cbind(Date =as.date(date), inpatient)
# inpatientSave = read.csv("HospitalData.csv")
# HospitalFed = as.data.frame(temp)
# HospitalFed = rbind(HospitalFed, temp)
if(sum(grepl(date, covid19$date)) == 0){
inpatientSave[nrow(inpatientSave)+1,] = temp
inpatientSave$date[nrow(inpatientSave)] = as.character(date)
inpatientSave = inpatientSave %>% unique()
covid19[nrow(covid19)+1, "date"] = as.character(date)
}
write.csv(inpatientSave, "HospitalData.csv",row.names = FALSE)
covid19[covid19$date == as.Date(date),c("hospitalized",
"new.hospital","ICU")] =
inpatient[c("inpatient_beds_used_covid",
"previous_day_admission_adult_covid_confirmed",
"staffed_icu_adult_patients_confirmed_and_suspected_covid")]
covid19[covid19$date == as.Date(date),"Admit"] =
sum((inpatient %>% select(contains("previous_day")))[1:4])
covid19 = covid19 %>% unique()
write.csv(covid19, "covid19.csv",row.names = FALSE)
view(inpatientSave)
date = Sys.Date()
URL = "https://healthdata.gov/resource/6xf2-c3ie.csv"
inpatient = read.csv(URL, na.strings = c("-999999","-999999.0"))
inpatient = inpatient %>% filter(state == "IA") %>%
select(contains("covid")) %>% select(-contains("coverage"))
temp = cbind(Date =as.date(date), inpatient)
# inpatientSave = read.csv("HospitalData.csv")
# HospitalFed = as.data.frame(temp)
# HospitalFed = rbind(HospitalFed, temp)
if(sum(grepl(date, covid19$date)) == 0){
inpatientSave[nrow(inpatientSave)+1,] = temp
inpatientSave$date[nrow(inpatientSave)] = as.character(date)
inpatientSave = inpatientSave %>% unique()
covid19[nrow(covid19)+1, "date"] = as.character(date)
}
write.csv(inpatientSave, "HospitalData.csv",row.names = FALSE)
covid19[covid19$date == as.Date(date),c("hospitalized",
"new.hospital","ICU")] =
inpatient[c("inpatient_beds_used_covid",
"previous_day_admission_adult_covid_confirmed",
"staffed_icu_adult_patients_confirmed_and_suspected_covid")]
covid19[covid19$date == as.Date(date),"Admit"] =
sum((inpatient %>% select(contains("previous_day")))[1:4])
covid19 = covid19 %>% unique()
write.csv(covid19, "covid19.csv",row.names = FALSE)
temp = cbind(Date =as.Date(date), inpatient)
# inpatientSave = read.csv("HospitalData.csv")
# HospitalFed = as.data.frame(temp)
# HospitalFed = rbind(HospitalFed, temp)
if(sum(grepl(date, covid19$date)) == 0){
inpatientSave[nrow(inpatientSave)+1,] = temp
inpatientSave$date[nrow(inpatientSave)] = as.character(date)
inpatientSave = inpatientSave %>% unique()
covid19[nrow(covid19)+1, "date"] = as.character(date)
}
sum(grepl(date, covid19$date))
date
tail(inpatientSave[,1:4])
view(inpatientSave)
inpatientSave[inpatientSave$date == date,]
inpatientSave = inpatientSave %>% unique()
write.csv(inpatientSave, "HospitalData.csv",row.names = FALSE)
covid19[covid19$date == as.Date(date),c("hospitalized",
"new.hospital","ICU")] =
inpatient[c("inpatient_beds_used_covid",
"previous_day_admission_adult_covid_confirmed",
"staffed_icu_adult_patients_confirmed_and_suspected_covid")]
covid19[covid19$date == as.Date(date),"Admit"] =
sum((inpatient %>% select(contains("previous_day")))[1:4])
covid19 = covid19 %>% unique()
write.csv(covid19, "covid19.csv",row.names = FALSE)
date = Sys.Date()
URL = "https://healthdata.gov/resource/6xf2-c3ie.csv"
inpatient = read.csv(URL, na.strings = c("-999999","-999999.0"))
inpatient = inpatient %>% filter(state == "IA") %>%
select(contains("covid")) %>% select(-contains("coverage"))
temp = cbind(Date =as.Date(date), inpatient)
inpatientSave[inpatientSave$date == date,] = temp
URL ="https://healthdata.gov/api/views/6xf2-c3ie/rows.csv"
inpatient = read.csv(URL, na.strings = c("-999999","-999999.0"))
inpatient = inpatient %>% filter(state == "IA") %>%
select(contains("covid")) %>% select(-contains("coverage"))
temp = cbind(Date =as.Date(date), inpatient)
inpatientSave[inpatientSave$date == date,] = temp
length(temp)
ncol(inpatientSave)
inpatientSave[inpatientSave$date == date,]
inpatientSave[inpatientSave$date == date,] = temp
temp[1:4]
names(inpatientSave) == names(temp)
names(inpatientSave)[names(inpatientSave) != names(temp)]
temp = cbind(date =as.Date(date), inpatient)
names(inpatientSave)[names(inpatientSave) != names(temp)]
temp1 =temp = cbind(date =as.Date(date), inpatient)
names(temp)[names(inpatientSave) != names(temp)]
names(temp) = names(inpatientSave)
inpatientSave[inpatientSave$date == date,] = temp
names(temp)[names(inpatientSave) != names(temp)]
str(temp)
str(inpatientSave)
inpatientSave[inpatientSave$date == date,-1] = temp[-1]
inpatientSave[inpatientSave$date == date,-1]
inpatientSave[inpatientSave$date == as.Date(date),-1]
inpatientSave[inpatientSave$date == as.character(date),-1]
inpatientSave[nrow(inpatientSave),-1]
inpatientSave[nrow(inpatientSave),] = temp
library(dplyr)
library(lubridate)
library(ggplot2)
library(zoo)
library(gsheet)
library(plyr)
library(pdftools)
library(tidyverse)
library(stringr)
library(anytime)
#  require(readxl)
colMax <- function(data) sapply(data, max, na.rm = TRUE)
view(inpatientSave)
temp[1]
inpatientSave[37,1] = as.character(date)
inpatientSave[37,1]
write.csv(inpatientSave, "HospitalData.csv",row.names = FALSE)
tail(covid19[,1:10])
date = Sys.Date()
URL = "https://healthdata.gov/resource/6xf2-c3ie.csv"
URL ="https://healthdata.gov/api/views/6xf2-c3ie/rows.csv"
inpatient = read.csv(URL, na.strings = c("-999999","-999999.0"))
inpatient = inpatient %>% filter(state == "IA") %>%
select(contains("covid")) %>% select(-contains("coverage"))
temp = cbind(date =as.Date(date), inpatient)
# inpatientSave = read.csv("HospitalData.csv")
# HospitalFed = as.data.frame(temp)
# HospitalFed = rbind(HospitalFed, temp)
if(sum(grepl(date, covid19$date)) == 0){
inpatientSave[nrow(inpatientSave)+1,] = temp
inpatientSave$date[nrow(inpatientSave)] = as.character(date)
covid19[nrow(covid19)+1, "date"] = as.character(date)
} else
{
inpatientSave[inpatientSave$date == date,] = temp
inpatientSave$date[nrow(inpatientSave)] = as.character(date)
}
inpatientSave = inpatientSave %>% unique()
write.csv(inpatientSave, "HospitalData.csv",row.names = FALSE)
covid19[covid19$date == as.Date(date),c("hospitalized",
"new.hospital","ICU")] =
inpatient[c("inpatient_beds_used_covid",
"previous_day_admission_adult_covid_confirmed",
"staffed_icu_adult_patients_confirmed_and_suspected_covid")]
covid19[covid19$date == as.Date(date),"Admit"] =
sum((inpatient %>% select(contains("previous_day")))[1:4])
covid19 = covid19 %>% unique()
inpatient[,1:4]
temp[,1:4]
inpatientSave[nrow(inpatientSave)+1,] = temp
tail(inpatientSave[,1:4])
inpatientSave = inpatientSave[-39,]
tail(inpatientSave[,1:2])
tail(inpatientSave[,1:3])
write.csv(inpatientSave, "HospitalData.csv",row.names = FALSE)
covid19[covid19$date == as.Date(date),c("hospitalized",
"new.hospital","ICU")] =
inpatient[c("inpatient_beds_used_covid",
"previous_day_admission_adult_covid_confirmed",
"staffed_icu_adult_patients_confirmed_and_suspected_covid")]
covid19[covid19$date == as.Date(date),"Admit"] =
sum((inpatient %>% select(contains("previous_day")))[1:4])
covid19 = covid19 %>% unique()
write.csv(covid19, "covid19.csv",row.names = FALSE)
qplot(date, hospitalized, data = tail(covid19, n=80))+geom_smooth(span = 0.3, se = TRUE)
qplot(date, hospitalized, data = tail(covid19, n=80))+geom_smooth(span = 0.3, se = TRUE)
mergedYearonYearHospMeans = covid19 %>%
drop_na(hospitalized) %>%
select("date","hospitalized") %>%
mutate(week = week(date),
year = year(date)) %>%
group_by(year, week) %>%
summarise_at(vars(hospitalized), list(WeeklyAve = mean))
qplot(week, WeeklyAve, data=mergedYearonYearHospMeans, color = factor(year)) + xlab("Week of Year") + ylab("Weekly Average Hospitalized")+geom_smooth(span = 0.3, se = TRUE)
qplot(week, WeeklyAve, data=mergedYearonYearHospMeans, color = factor(year)) + xlab("Week of Year") + ylab("Weekly Average Hospitalized")+geom_smooth(span = 0.3, se = TRUE)
qplot(week, WeeklyAve, data=mergedYearonYearHospMeans, color = factor(year)) + xlab("Week of Year") + ylab("Weekly Average Hospitalized")+geom_smooth(span = 0.3, se = TRUE)
source("HospitalData.R")
source("HospitalData.R")
tail(inpatientSave[,0:4])
tail(inpatientSave[,0:4])
read.csv("HospitalData.csv",inpatientSave)
inpatientSave <- read.csv("HospitalData.csv",inpatientSave,)
inpatientSave <- read.csv("HospitalData.csv", stringsAsFactors = FALSE)
# inpatientSave = read.csv("HospitalData.csv")
# HospitalFed = as.data.frame(temp)
# HospitalFed = rbind(HospitalFed, temp)
if(sum(grepl(date, covid19$date)) == 0){
inpatientSave[nrow(inpatientSave)+1,] = temp
inpatientSave$date[nrow(inpatientSave)] = as.character(date)
covid19[nrow(covid19)+1, "date"] = as.character(date)
} else
{
inpatientSave[inpatientSave$date == date,] = temp
inpatientSave$date[nrow(inpatientSave)] = as.character(date)
}
inpatientSave = inpatientSave %>% unique()
tail(inpatientSave[,1:4])
write.csv(inpatientSave, "HospitalData.csv",row.names = FALSE)
covid19[covid19$date == as.Date(date),c("hospitalized",
"new.hospital","ICU")] =
inpatient[c("inpatient_beds_used_covid",
"previous_day_admission_adult_covid_confirmed",
"staffed_icu_adult_patients_confirmed_and_suspected_covid")]
covid19[covid19$date == as.Date(date),"Admit"] =
sum((inpatient %>% select(contains("previous_day")))[1:4])
covid19 = covid19 %>% unique()
write.csv(covid19, "covid19.csv",row.names = FALSE)
source("HospitalData.R")
tail(inpatientSave[,0:4])
tail(inpatientSave[,0:4])
require(dplyr)
require(lubridate)
require(ggplot2)
require(zoo)
require(gsheet)
require(plyr)
require(pdftools)
require(tidyverse)
require(stringr)
require(anytime)
#  require(readxl)
colMax <- function(data) sapply(data, max, na.rm = TRUE)
##############################################
mergedYearonYearHospMeans = covid19 %>%
drop_na(hospitalized) %>%
select("date","hospitalized") %>%
mutate(week = week(date),
year = year(date)) %>%
group_by(year, week) %>%
summarise_at(vars(hospitalized), list(WeeklyAve = mean))
qplot(week, WeeklyAve, data=mergedYearonYearHospMeans, color = factor(year)) + xlab("Week of Year") + ylab("Weekly Average Hospitalized")+geom_smooth(span = 0.3, se = TRUE)
qplot(week, WeeklyAve, data=mergedYearonYearHospMeans, color = factor(year)) + xlab("Week of Year") + ylab("Weekly Average Hospitalized")+geom_smooth(span = 0.3, se = TRUE)
names(BremerData)
mergedYearonYearCounty = BremerData %>%
drop_na(Active) %>%
select("date","Active") %>%
mutate(week = week(date),
year = year(date)) %>%
group_by(year, week) %>%
summarise_at(vars(Active), list(WeeklyAve = mean))
qplot(week, WeeklyAve, data=mergedYearonYearCounty,
color = factor(year)) +
title = "Bremer County Active COVID-19 Cases" +
labs(fill = "Year") +
xlab("Week of Year") +
ylab("Weekly Average")+
geom_smooth(span = 0.3, se = TRUE)
qplot(week, WeeklyAve, data=mergedYearonYearCounty,
color = factor(year)) +
title( "Bremer County Active COVID-19 Cases" ) +
xlab("Week of Year") +
ylab("Weekly Average")+
geom_smooth(span = 0.3, se = TRUE)
qplot(week, WeeklyAve, data=mergedYearonYearCounty,
color = factor(year)) +
title( "Bremer County Active COVID-19 Cases" ) +
xlab("Week of Year") +
ylab("Weekly Average")+
geom_smooth(span = 0.3, se = TRUE)
qplot(week, WeeklyAve, data=mergedYearonYearCounty,
color = factor(year)) +
labs(title( "Bremer County Active COVID-19 Cases" )) +
xlab("Week of Year") +
ylab("Weekly Average")+
geom_smooth(span = 0.3, se = TRUE)
qplot(week, WeeklyAve, data=mergedYearonYearCounty,
color = factor(year)) +
labs(title= "Bremer County Active COVID-19 Cases" ) +
xlab("Week of Year") +
ylab("Weekly Average")+
geom_smooth(span = 0.3, se = TRUE)
qplot(week, WeeklyAve, data=mergedYearonYearCounty,
color = factor(year)) +
labs(title= "Bremer County Active COVID-19 Cases",
fill = "Year" ) +
xlab("Week of Year") +
ylab("Weekly Average")+
geom_smooth(span = 0.3, se = TRUE)
view(mergedYearonYearCounty)
mergedYearonYearCounty = Black.HawkData %>%
drop_na(Active) %>%
select("date","Active") %>%
mutate(week = week(date),
year = year(date)) %>%
group_by(year, week) %>%
summarise_at(vars(Active), list(WeeklyAve = mean))
qplot(week, WeeklyAve, data=mergedYearonYearCounty,
color = factor(year)) +
labs(title= "Bremer County Active COVID-19 Cases",
fill = "Year" ) +
xlab("Week of Year") +
ylab("Weekly Average")+
geom_smooth(span = 0.3, se = TRUE)
names(covid19[,1:10])
names(covid19[,1:20])
covid19$Still.Sick
covid19 <- read.csv("covid19.csv",
stringsAsFactors = FALSE)
## Fix an error that sometimes comes from importing from EXCEL
names(covid19)[1] <- "date"
# names(covid19)[names(covid19) == "Ã¯..date"] <- 'date'
## Format date column correctly
covid19$date = anydate(covid19$date)
## Check to see if date already has a row in the data, if not add such a row.
if(sum(grepl(date, covid19$date)) == 0){
covid19[nrow(covid19)+1, "date"] =
as.character(date)
}
i=as.Date(date)
covid19 <- read.csv("covid19.csv",
stringsAsFactors = FALSE)
## Fix an error that sometimes comes from importing from EXCEL
names(covid19)[1] <- "date"
# names(covid19)[names(covid19) == "Ã¯..date"] <- 'date'
## Format date column correctly
covid19$date = anydate(covid19$date)
## Check to see if date already has a row in the data, if not add such a row.
if(sum(grepl(date, covid19$date)) == 0){
covid19[nrow(covid19)+1, "date"] =
as.character(date)
}
date = Sys.Date()
source("HospitalData.R")
tail(inpatientSave[,0:4])
tail(inpatientSave[,0:4])
inpatient = read.csv(URL, na.strings = c("-999999","-999999.0"))
inpatient = inpatient %>% filter(state == "IA") %>%
select(contains("covid")) %>% select(-contains("coverage"))
inpatient = read.csv(URL, na.strings = c("-999999","-999999.0"))
inpatient = inpatient %>% filter(state == "IA") %>%
select(contains("covid")) %>% select(-contains("coverage"))
tail(inpatientSave[,0:4])
